
var aoi = /* color: #31ecff */ee.Geometry.Point([-94.15711944258321, 49.96181903171159]),
    srtm = ee.Image("USGS/SRTMGL1_003"),
    known_crags = /* color: #d63000 */ee.Geometry({
      "type": "GeometryCollection",
      "geometries": [
        {
          "type": "Point",
          "coordinates": [
            -95.51419432405885,
            50.03709087774896
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            -94.11385799942869,
            49.94061510250822
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            -94.24964214859861,
            49.96182221720834
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            -93.96881963885768,
            50.039818326490995
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            -94.14515846713846,
            50.050964109222754
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            -94.1527115677244,
            50.09018809457295
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            -94.36795385334027,
            49.81084378126469
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            -94.37297494861615,
            49.8006513771078
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            -94.78939991611325,
            50.05823390403992
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            -95.26804366063543,
            49.818811286462264
          ]
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -95.26388087224431,
                49.81784215211297
              ],
              [
                -95.26744284581609,
                49.817232972015546
              ],
              [
                -95.27010359715887,
                49.816568403162606
              ],
              [
                -95.27096190404363,
                49.81570998821927
              ],
              [
                -95.26752867650457,
                49.81612535219008
              ],
              [
                -95.26418127965398,
                49.81676223668752
              ],
              [
                -95.26199259709783,
                49.816928379090896
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Point",
          "coordinates": [
            -95.46245684021774,
            49.948406331281134
          ]
        },
        {
          "type": "Point",
          "coordinates": [
            -93.49196440444393,
            49.90289945922239
          ]
        }
      ],
      "coordinates": []
    }),
    potential_crags = /* color: #d304d6 */ee.Geometry.MultiPoint(
        [[-94.25296181186502, 50.06110371890729],
         [-94.79998983906258, 49.88221073839497],
         [-94.37807058874091, 49.98524718901579],
         [-94.41498184225777, 49.99385572020821],
         [-94.35507181545509, 50.070130126651314],
         [-94.2158316076516, 50.075537015447246],
         [-94.30549744120309, 49.951065546184296],
         [-94.79197483676755, 50.05900535450859],
         [-95.29501543245759, 50.06778793232207],
         [-94.29535371586778, 49.83053767331647],
         [-95.61177944141524, 50.146254061692865],
         [-95.55666224654153, 50.19867972041704],
         [-95.55684007673818, 50.26661416372941],
         [-95.56737579374868, 50.30444181680075],
         [-95.29407941205784, 50.25527070124715],
         [-94.02527053447025, 49.29121802321745],
         [-93.04973923417802, 49.50893728735838],
         [-93.12346065994626, 49.57239794024963],
         [-94.91696684304468, 49.61374858742369],
         [-94.70748577296823, 49.76935721779231],
         [-94.9380819658079, 49.68261493392136],
         [-95.03569100979566, 49.66489489904302],
         [-95.80961017802846, 50.31419978247463],
         [-94.82591862757658, 50.066724379363905]]),
    rock = 
    /* color: #d63000 */
    /* shown: false */
    ee.Geometry({
      "type": "GeometryCollection",
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.11138445266971,
                49.93821120689533
              ],
              [
                -94.11254320582935,
                49.93589100186559
              ],
              [
                -94.11606208565037,
                49.93390219376732
              ],
              [
                -94.11237136604588,
                49.93412318012979
              ],
              [
                -94.11108390571873,
                49.935835790078734
              ],
              [
                -94.10962478401463,
                49.937272125684125
              ],
              [
                -94.1097106147031,
                49.939316067919975
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.24696676264413,
                49.95512520583726
              ],
              [
                -94.24499265680917,
                49.95606397718876
              ],
              [
                -94.24387689024425,
                49.95741686889655
              ],
              [
                -94.24301855097421,
                49.95965322829181
              ],
              [
                -94.24387685785898,
                49.96169622095907
              ],
              [
                -94.24426316545537,
                49.96006727504239
              ],
              [
                -94.24482110085667,
                49.95827267692298
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -93.96506882385081,
                50.04467606054747
              ],
              [
                -93.96687126830882,
                50.043463413633546
              ],
              [
                -93.96893120483226,
                50.04208536859119
              ],
              [
                -93.96738625243968,
                50.04142389291932
              ],
              [
                -93.96652794555492,
                50.04280195695022
              ],
              [
                -93.96446800903148,
                50.04373901789491
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -95.50736335246822,
                50.03597089799759
              ],
              [
                -95.50912288158199,
                50.03517151194636
              ],
              [
                -95.50852206676265,
                50.03467533460014
              ],
              [
                -95.50766375987789,
                50.03503368542004
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -95.55519776073095,
                50.03230035599653
              ],
              [
                -95.55510656336683,
                50.03240717898263
              ],
              [
                -95.55570201602575,
                50.032252113872886
              ],
              [
                -95.5579443427622,
                50.03139063922039
              ],
              [
                -95.55729526026077,
                50.031345845041365
              ],
              [
                -95.55563765981076,
                50.03146645338426
              ],
              [
                -95.55480617135744,
                50.03182827299316
              ],
              [
                -95.55496977943551,
                50.0322710661512
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.14018028720682,
                50.050082302767954
              ],
              [
                -94.1417252395994,
                50.048814677602635
              ],
              [
                -94.14176815494363,
                50.047932831653384
              ],
              [
                -94.14037340625589,
                50.048001726451666
              ],
              [
                -94.13985842212503,
                50.048552881277544
              ],
              [
                -94.1397082184202,
                50.04909025113889
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.14007299884622,
                50.09298572464306
              ],
              [
                -94.14290541156595,
                50.091829364083964
              ],
              [
                -94.14384954913919,
                50.09050777499043
              ],
              [
                -94.145437416876,
                50.08902094369458
              ],
              [
                -94.1476690147764,
                50.08750653106785
              ],
              [
                -94.14891355975931,
                50.086102214781626
              ],
              [
                -94.14977186664407,
                50.08486307800609
              ],
              [
                -94.14831274493997,
                50.08491815143191
              ],
              [
                -94.14681070789163,
                50.085909462276085
              ],
              [
                -94.14517992481058,
                50.08712103657668
              ],
              [
                -94.14402121051614,
                50.08877313399387
              ],
              [
                -94.1430770729429,
                50.089599161346484
              ],
              [
                -94.14058798297708,
                50.091003375171624
              ],
              [
                -94.13839930042093,
                50.09202209278161
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.1681825493223,
                50.08301808167399
              ],
              [
                -94.16921251758401,
                50.08263255108259
              ],
              [
                -94.16904085620706,
                50.08202671103143
              ],
              [
                -94.1699849937803,
                50.08172378813454
              ],
              [
                -94.17028540118997,
                50.080870086035475
              ],
              [
                -94.1694270943052,
                50.08042945964894
              ],
              [
                -94.16809671863382,
                50.08111793659814
              ],
              [
                -94.16693800433939,
                50.081668711038546
              ],
              [
                -94.167410073126,
                50.08288039253302
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.36898382160199,
                49.79749351218573
              ],
              [
                -94.36992795917523,
                49.79724419828891
              ],
              [
                -94.37078626606,
                49.796884075949535
              ],
              [
                -94.3700567343955,
                49.79637144934618
              ],
              [
                -94.36924134285498,
                49.79675927739861
              ],
              [
                -94.3684903243308,
                49.79710554982069
              ],
              [
                -94.3681470015769,
                49.7977288339406
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.78532015261605,
                50.05663389125072
              ],
              [
                -94.78564201769784,
                50.055655751811685
              ],
              [
                -94.78722988543466,
                50.05488424748373
              ],
              [
                -94.78856026110604,
                50.0548153625655
              ],
              [
                -94.79023395953134,
                50.055159786167735
              ],
              [
                -94.79042707858041,
                50.055710858789006
              ],
              [
                -94.79046999392465,
                50.05648234982608
              ],
              [
                -94.79113518176034,
                50.057019630899156
              ],
              [
                -94.79222952303842,
                50.05648234982608
              ],
              [
                -94.79186474261239,
                50.05598639272626
              ],
              [
                -94.79141413149789,
                50.05549043049998
              ],
              [
                -94.7907489436622,
                50.054457159396584
              ],
              [
                -94.78928982195809,
                50.05426427965959
              ],
              [
                -94.78778778490975,
                50.05420917102088
              ],
              [
                -94.78669344363168,
                50.05429183395519
              ],
              [
                -94.78564201769784,
                50.054760254559724
              ],
              [
                -94.78484808382943,
                50.05521489371467
              ],
              [
                -94.78454767641976,
                50.05628947822976
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.78287397799447,
                50.05324475959866
              ],
              [
                -94.78353916583016,
                50.05303809748646
              ],
              [
                -94.78353916583016,
                50.05251454948546
              ],
              [
                -94.78244482455209,
                50.05219766239417
              ],
              [
                -94.78143631396249,
                50.052266551070275
              ],
              [
                -94.78126465258553,
                50.05284521204538
              ],
              [
                -94.78150068697884,
                50.05327231447972
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.77409033413029,
                50.051745708180725
              ],
              [
                -94.76851133937932,
                50.053729681149605
              ],
              [
                -94.76585058803654,
                50.054446095674656
              ],
              [
                -94.76107506638299,
                50.05306836594053
              ],
              [
                -94.75815682297478,
                50.055162499503695
              ],
              [
                -94.75987343674431,
                50.055162499503695
              ],
              [
                -94.76219086533318,
                50.05455631234456
              ],
              [
                -94.764679955299,
                50.05527271452802
              ],
              [
                -94.76673989182244,
                50.05554825098131
              ],
              [
                -94.7690573204113,
                50.05576867900471
              ],
              [
                -94.77171807175408,
                50.054446095674656
              ],
              [
                -94.77326302414666,
                50.05306836594053
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.76768402939568,
                50.05857904753952
              ],
              [
                -94.77137474900017,
                50.057421856902494
              ],
              [
                -94.773863838966,
                50.05665038097195
              ],
              [
                -94.77686791306267,
                50.052351930845965
              ],
              [
                -94.7745504844738,
                50.051745708180725
              ],
              [
                -94.7690573204113,
                50.05703612048781
              ],
              [
                -94.76734070664178,
                50.05687080393218
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.90801246708455,
                49.606741142143754
              ],
              [
                -94.9052658850533,
                49.606796762998655
              ],
              [
                -94.90191848820271,
                49.610078281114596
              ],
              [
                -94.90337760990681,
                49.61369325720254
              ],
              [
                -94.91050155705037,
                49.61664065466096
              ],
              [
                -94.9257794195992,
                49.61380448298443
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -95.34376861838597,
                50.24618186584878
              ],
              [
                -95.352780840676,
                50.249475025296185
              ],
              [
                -95.35123588828343,
                50.25057269454211
              ],
              [
                -95.35767318991917,
                50.25315211774355
              ],
              [
                -95.35775902060765,
                50.251944745542936
              ],
              [
                -95.35346748618382,
                50.24689540304057
              ],
              [
                -95.34497024802464,
                50.244260751079054
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -95.3440261104514,
                50.24596231379433
              ],
              [
                -95.34016372946995,
                50.24706006395233
              ],
              [
                -95.33982040671604,
                50.24876152672737
              ],
              [
                -95.34342529563206,
                50.24958479335859
              ],
              [
                -95.34685852317112,
                50.25057269454211
              ],
              [
                -95.35012008933323,
                50.25007874651041
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -95.3718352535178,
                50.263029468419674
              ],
              [
                -95.3762126186301,
                50.261932086144085
              ],
              [
                -95.3758692958762,
                50.25836541913815
              ],
              [
                -95.37089111594456,
                50.25534726154549
              ],
              [
                -95.37089111594456,
                50.257487429377875
              ],
              [
                -95.36883117942112,
                50.25693867756055
              ],
              [
                -95.36900284079807,
                50.25457897271905
              ],
              [
                -95.36514045981663,
                50.25298747788132
              ],
              [
                -95.361964724343,
                50.25304235789861
              ],
              [
                -95.3645396449973,
                50.25567652439281
              ],
              [
                -95.36247970847386,
                50.256883802031155
              ],
              [
                -95.36762954978245,
                50.26143825587157
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -95.4033948113262,
                50.28906921185854
              ],
              [
                -95.40493976371877,
                50.28758854988552
              ],
              [
                -95.40820132988088,
                50.28396896000066
              ],
              [
                -95.40528308647268,
                50.28320113281626
              ],
              [
                -95.40167819755666,
                50.28819178810247
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -95.21391845980652,
                50.22230694099689
              ],
              [
                -95.20911194125183,
                50.226645058632506
              ],
              [
                -95.21134353915222,
                50.229006146704954
              ],
              [
                -95.21898247042664,
                50.224723156462424
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -95.21958328524597,
                50.21895698526523
              ],
              [
                -95.22473312655457,
                50.217144616070804
              ],
              [
                -95.22593475619324,
                50.2146181683738
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        }
      ],
      "coordinates": []
    }),
    vegetation = 
    /* color: #05ff0d */
    /* shown: false */
    ee.Geometry({
      "type": "GeometryCollection",
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.45352719781843,
                49.979406004276335
              ],
              [
                -94.46880506036726,
                49.96737209159816
              ],
              [
                -94.47567151544538,
                49.977180631168906
              ],
              [
                -94.48940442560163,
                49.96470447278856
              ],
              [
                -94.4960992193028,
                49.95531762036302
              ],
              [
                -94.45198224542585,
                49.953219132489366
              ],
              [
                -94.44357083795515,
                49.96348980674714
              ],
              [
                -94.43481610773054,
                49.97088775199217
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.29937528131452,
                50.045025153790164
              ],
              [
                -94.31860135553327,
                50.03135364145895
              ],
              [
                -94.31825803277937,
                50.021538623821115
              ],
              [
                -94.31053327081648,
                50.02297240316723
              ],
              [
                -94.29147885797468,
                50.03995391794776
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.32479190174853,
                49.862913378441576
              ],
              [
                -94.33251666371142,
                49.8486366301086
              ],
              [
                -94.3373231822661,
                49.83789862237574
              ],
              [
                -94.31294726673876,
                49.84485486516139
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.5368455513233,
                49.97632197537335
              ],
              [
                -94.55675827104986,
                49.96517067328351
              ],
              [
                -94.55744491655767,
                49.955783911762374
              ],
              [
                -94.55984817583501,
                49.9479418022235
              ],
              [
                -94.54920517046392,
                49.95379589214978
              ],
              [
                -94.53701721270025,
                49.96163704845687
              ],
              [
                -94.53272567827642,
                49.96583319906205
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -93.94696940588712,
                50.060909825567336
              ],
              [
                -93.95383586096524,
                50.05600558818471
              ],
              [
                -93.94902934241055,
                50.05358083620393
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -93.89808183899844,
                50.057833983502356
              ],
              [
                -93.90022760621035,
                50.049236910256965
              ],
              [
                -93.89396196595156,
                50.0490164522282
              ],
              [
                -93.89258867493594,
                50.05766866969579
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -93.79868990174258,
                50.06306862610217
              ],
              [
                -93.79714494935,
                50.04604016972346
              ],
              [
                -93.79027849427187,
                50.04615040570007
              ],
              [
                -93.79559999695742,
                50.063674705717055
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -93.82933442197445,
                50.04607993337508
              ],
              [
                -93.8404924114764,
                50.03262925574795
              ],
              [
                -93.82796113095883,
                50.03108549432805
              ],
              [
                -93.82298295102719,
                50.0444263647147
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.33051019381426,
                50.10322340163371
              ],
              [
                -94.34767633150958,
                50.09166101108962
              ],
              [
                -94.335145050992,
                50.08681498920274
              ],
              [
                -94.31952386568926,
                50.09925946778807
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.2992678232088,
                50.1156636189859
              ],
              [
                -94.30991082857989,
                50.10784757656881
              ],
              [
                -94.29308801363848,
                50.10729710296261
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.2637339181795,
                50.094854712150415
              ],
              [
                -94.27060037325762,
                50.09044955155661
              ],
              [
                -94.25961404513262,
                50.086043985995474
              ],
              [
                -94.25068765353106,
                50.0914407479979
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        }
      ],
      "coordinates": []
    }),
    water = 
    /* color: #13f4ff */
    /* shown: false */
    ee.Geometry({
      "type": "GeometryCollection",
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.16399014030772,
                50.025819370956974
              ],
              [
                -94.17016994987803,
                50.019863744800375
              ],
              [
                -94.17222988640147,
                50.01324551640491
              ],
              [
                -94.17034161125498,
                50.01026701621503
              ],
              [
                -94.16433346306162,
                50.011480501539474
              ],
              [
                -94.15935528312998,
                50.01534138735995
              ],
              [
                -94.15403378044444,
                50.01809897302842
              ],
              [
                -94.14836895500498,
                50.02416510442198
              ],
              [
                -94.15060055290537,
                50.032325599917115
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.00398332512155,
                50.04744465100439
              ],
              [
                -94.01574212944284,
                50.04683836634863
              ],
              [
                -94.02003366386667,
                50.04501946643022
              ],
              [
                -94.03387092864646,
                50.04113374643859
              ],
              [
                -94.03232597625389,
                50.03518001925057
              ],
              [
                -94.02297043120994,
                50.029280691081524
              ],
              [
                -94.01661896026268,
                50.030603967922595
              ],
              [
                -94.00717758453025,
                50.03870824300229
              ],
              [
                -94.00082611358299,
                50.04091325118989
              ],
              [
                -93.9960195950283,
                50.0399210100381
              ],
              [
                -94.00065445220604,
                50.043614248203575
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.06415273021743,
                50.09036111639122
              ],
              [
                -94.07136250804946,
                50.092784009303
              ],
              [
                -94.07719899486587,
                50.087167115836294
              ],
              [
                -94.07033253978774,
                50.08353230454914
              ],
              [
                -94.07565404247329,
                50.080007375818454
              ],
              [
                -94.07067586254165,
                50.0797870591667
              ],
              [
                -94.06466771434829,
                50.07813465200568
              ],
              [
                -94.05350972484634,
                50.07692285055755
              ],
              [
                -94.01952077220962,
                50.08595554270049
              ],
              [
                -94.02261067699477,
                50.08959017022926
              ],
              [
                -94.03411198925063,
                50.08650626155888
              ],
              [
                -94.04424001049087,
                50.08992057724587
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.10449315380141,
                50.092343492430714
              ],
              [
                -94.11633778881118,
                50.08573525338537
              ],
              [
                -94.12629414867446,
                50.08452364405458
              ],
              [
                -94.12972737621352,
                50.090801651486885
              ],
              [
                -94.1338472492604,
                50.08518452566806
              ],
              [
                -94.14414693187759,
                50.080007375818454
              ],
              [
                -94.14655019115493,
                50.07571101848116
              ],
              [
                -94.13882542919204,
                50.07659235393787
              ],
              [
                -94.13436223339126,
                50.07901594291232
              ],
              [
                -94.13041402172134,
                50.07681268527076
              ],
              [
                -94.12663747142837,
                50.074719496728065
              ],
              [
                -94.12663747142837,
                50.07020230483764
              ],
              [
                -94.11376286815688,
                50.074939836667305
              ],
              [
                -94.10844136547134,
                50.07681268527076
              ],
              [
                -94.1038065082936,
                50.07593135386409
              ],
              [
                -94.09728337596938,
                50.091021917516116
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.13129945626197,
                49.89603872629478
              ],
              [
                -94.14846559395728,
                49.88210360606647
              ],
              [
                -94.17181154122291,
                49.879670077264116
              ],
              [
                -94.17490144600806,
                49.88564306536274
              ],
              [
                -94.18279786934791,
                49.87834264621732
              ],
              [
                -94.19824739327369,
                49.87657268138565
              ],
              [
                -94.19275422921119,
                49.88542185675946
              ],
              [
                -94.18348451485572,
                49.89073058346157
              ],
              [
                -94.19206758370338,
                49.89471174532317
              ],
              [
                -94.2209066950315,
                49.888297489534324
              ],
              [
                -94.23326631417213,
                49.8745813933983
              ],
              [
                -94.21781679024635,
                49.861746678813354
              ],
              [
                -94.19429918160377,
                49.86871767969577
              ],
              [
                -94.16254182686744,
                49.868164462408096
              ],
              [
                -94.14880891671119,
                49.867168655322985
              ],
              [
                -94.14039750924049,
                49.87845326686512
              ],
              [
                -94.12220140328346,
                49.88907166908832
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.02539044198015,
                49.992488323051425
              ],
              [
                -94.03826504525163,
                49.98685968237153
              ],
              [
                -94.0307119446657,
                49.985866324458264
              ],
              [
                -93.99946957406023,
                49.99083290887933
              ],
              [
                -93.98075848397234,
                49.99105363406132
              ],
              [
                -93.96702557381609,
                49.992709040635624
              ],
              [
                -93.97492199715593,
                49.995688628872344
              ],
              [
                -93.98075848397234,
                49.99315047276493
              ],
              [
                -94.0145757752321,
                49.99226760445416
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.13556137589687,
                50.00155984088321
              ],
              [
                -94.13865128068203,
                50.00034610507463
              ],
              [
                -94.13659134415859,
                49.993173404315975
              ],
              [
                -94.13315811661953,
                49.99328376166252
              ],
              [
                -94.13161316422695,
                49.99615296378025
              ],
              [
                -94.12440338639492,
                49.99692541202264
              ],
              [
                -94.12680664567226,
                49.999794396849964
              ],
              [
                -94.13347188893128,
                49.9975583346326
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.06436380493898,
                50.04350697607443
              ],
              [
                -94.05826982605714,
                50.052656183457614
              ],
              [
                -94.06513628113527,
                50.05783628650422
              ],
              [
                -94.05578073609132,
                50.05778118196798
              ],
              [
                -94.04797014343995,
                50.05816691239266
              ],
              [
                -94.05243333924074,
                50.06075673635925
              ],
              [
                -94.05483659851808,
                50.06389739911661
              ],
              [
                -94.06324800598878,
                50.063677008438574
              ],
              [
                -94.06350549805421,
                50.06015061987687
              ],
              [
                -94.06745370972413,
                50.05877305393722
              ],
              [
                -94.07071527588624,
                50.05789139097719
              ],
              [
                -94.07303270447511,
                50.06307092885277
              ],
              [
                -94.0778392230298,
                50.06378720390417
              ],
              [
                -94.08504900086183,
                50.06108734212195
              ],
              [
                -94.08238824951906,
                50.056954606329576
              ],
              [
                -94.0781825457837,
                50.05508098216236
              ],
              [
                -94.07552179444093,
                50.0538685981263
              ],
              [
                -94.08161577332277,
                50.05045171466979
              ],
              [
                -94.08255991089601,
                50.047971566237564
              ],
              [
                -94.08049997437257,
                50.04626294498088
              ],
              [
                -94.07251772034425,
                50.05408903386586
              ],
              [
                -94.07020029175538,
                50.05414414264252
              ],
              [
                -94.06676706421632,
                50.04615270926272
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.23312535255583,
                50.0644637081503
              ],
              [
                -94.24033513038786,
                50.061818984405946
              ],
              [
                -94.24874653785857,
                50.0549861064963
              ],
              [
                -94.2427383896652,
                50.055495708179464
              ],
              [
                -94.23964848488005,
                50.05240960614477
              ],
              [
                -94.22437062233122,
                50.05406289977525
              ],
              [
                -94.21218266456755,
                50.05263004858662
              ],
              [
                -94.20720448463591,
                50.057479526107635
              ],
              [
                -94.21475758522185,
                50.06144691589668
              ],
              [
                -94.22780384987028,
                50.059242850962896
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -95.98780780206042,
                50.36675961014568
              ],
              [
                -96.00720553765612,
                50.34923672855031
              ],
              [
                -95.97561984429674,
                50.34584092219449
              ],
              [
                -95.9706416643651,
                50.36478860887241
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -95.89322238335924,
                50.37902177878593
              ],
              [
                -95.9292712725194,
                50.37748918101801
              ],
              [
                -95.92206149468737,
                50.367635584435455
              ],
              [
                -95.89682719160578,
                50.36391258203018
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -93.76337756323575,
                50.04856561947833
              ],
              [
                -93.75960101294278,
                50.05848532142734
              ],
              [
                -93.75067462134122,
                50.06245262804399
              ],
              [
                -93.7602876584506,
                50.07016589617915
              ],
              [
                -93.78329028296231,
                50.06245262804399
              ],
              [
                -93.78466357397794,
                50.05650154508613
              ],
              [
                -93.78088702368497,
                50.045699546028246
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -93.8045762937045,
                50.068843709734914
              ],
              [
                -93.81933917212247,
                50.07082697573186
              ],
              [
                -93.83307208227872,
                50.0657584662735
              ],
              [
                -93.82757891821622,
                50.06333420718209
              ],
              [
                -93.80766619848966,
                50.05738323358627
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        }
      ],
      "coordinates": []
    }),
    cloud = 
    /* color: #ff9900 */
    /* shown: false */
    ee.Geometry({
      "type": "GeometryCollection",
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.62296537927686,
                50.104062209792666
              ],
              [
                -94.64270643762647,
                50.104062209792666
              ],
              [
                -94.64922956995069,
                50.09701511292024
              ],
              [
                -94.64579634241163,
                50.09283040865871
              ],
              [
                -94.64270643762647,
                50.09194937171762
              ],
              [
                -94.62931685022413,
                50.09161897868855
              ],
              [
                -94.622450395146,
                50.096024031782186
              ],
              [
                -94.61421064905225,
                50.10197021110368
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.47003528866266,
                50.05131973258756
              ],
              [
                -94.47767421993707,
                50.04878451414508
              ],
              [
                -94.47801754269098,
                50.047406621862955
              ],
              [
                -94.47424099239801,
                50.046304279555365
              ],
              [
                -94.4775883892486,
                50.044154639236154
              ],
              [
                -94.47509929928277,
                50.04178441139866
              ],
              [
                -94.47861835751031,
                50.040240944309915
              ],
              [
                -94.48299572262262,
                50.03886280676141
              ],
              [
                -94.48205158504938,
                50.034066579709844
              ],
              [
                -94.4764725902984,
                50.032026659781096
              ],
              [
                -94.47055027279352,
                50.03665770439819
              ],
              [
                -94.46411297115777,
                50.04299710072734
              ],
              [
                -94.46600124630426,
                50.044264879543114
              ],
              [
                -94.45913479122613,
                50.04657986750578
              ],
              [
                -94.46428463253473,
                50.05038281963421
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.44617435726617,
                50.07054996230285
              ],
              [
                -94.44394275936578,
                50.06812594538907
              ],
              [
                -94.4501225689361,
                50.06790557413976
              ],
              [
                -94.4478909710357,
                50.06515084808809
              ],
              [
                -94.44394275936578,
                50.06625275749444
              ],
              [
                -94.44050953182672,
                50.0632775440005
              ],
              [
                -94.44394275936578,
                50.061073563173956
              ],
              [
                -94.43827793392633,
                50.06074295731629
              ],
              [
                -94.43415806087945,
                50.058649067308906
              ],
              [
                -94.42677662167047,
                50.05886948108698
              ],
              [
                -94.43638965877985,
                50.06294695333181
              ],
              [
                -94.43604633602594,
                50.064930463169084
              ],
              [
                -94.43450138363336,
                50.06713426679323
              ],
              [
                -94.43862125668024,
                50.07209245473028
              ],
              [
                -94.44428608211969,
                50.07286368233866
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.47283793021445,
                50.02821554110422
              ],
              [
                -94.47661448050742,
                50.02259108302745
              ],
              [
                -94.48536921073203,
                50.02226021204241
              ],
              [
                -94.48794413138633,
                50.01718657156609
              ],
              [
                -94.4810776763082,
                50.015201088134624
              ],
              [
                -94.47421122123008,
                50.0180689823118
              ],
              [
                -94.46665812064414,
                50.02203963011968
              ],
              [
                -94.46597147513633,
                50.02700247840089
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.62018872960535,
                49.85607264744475
              ],
              [
                -94.61950208409753,
                49.85120284345259
              ],
              [
                -94.60508252843347,
                49.85098147706594
              ],
              [
                -94.59958936437097,
                49.85806469855101
              ],
              [
                -94.61126233800378,
                49.863819051555325
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -95.08094111496922,
                50.35477077176944
              ],
              [
                -95.08694926316258,
                50.35236115055913
              ],
              [
                -95.08815089280125,
                50.34863694995629
              ],
              [
                -95.08471766526219,
                50.345460195085515
              ],
              [
                -95.07870951706883,
                50.34480290892478
              ],
              [
                -95.07218638474461,
                50.34480290892478
              ],
              [
                -95.06686488205906,
                50.34644610727005
              ],
              [
                -95.06531992966649,
                50.350389551332015
              ],
              [
                -95.06875315720555,
                50.3537850324195
              ],
              [
                -95.07252970749852,
                50.35214208802121
              ],
              [
                -95.07819453293797,
                50.3535659764512
              ],
              [
                -95.07630625779149,
                50.35531839589798
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -95.4539158589564,
                50.39467621970802
              ],
              [
                -95.45812156269176,
                50.39440263549546
              ],
              [
                -95.46009566852672,
                50.39571582531715
              ],
              [
                -95.46009566852672,
                50.39330828285721
              ],
              [
                -95.4619839436732,
                50.39259694009615
              ],
              [
                -95.46103980609996,
                50.39101006009212
              ],
              [
                -95.46292808124645,
                50.39029868284944
              ],
              [
                -95.46121146747691,
                50.38914951244999
              ],
              [
                -95.45458158082309,
                50.391228943250326
              ],
              [
                -95.454924903577,
                50.38942312697604
              ],
              [
                -95.44840177125278,
                50.38783614074734
              ],
              [
                -95.44591268128696,
                50.39161198634579
              ],
              [
                -95.44823010987582,
                50.39292525346592
              ],
              [
                -95.44788678712192,
                50.394621502991825
              ],
              [
                -95.4508908612186,
                50.39598940195149
              ],
              [
                -95.45192082948031,
                50.39407433235638
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -95.50661590168102,
                50.39511395116422
              ],
              [
                -95.50910499164684,
                50.39380074467045
              ],
              [
                -95.51082160541637,
                50.39308940929825
              ],
              [
                -95.51348235675914,
                50.39248750180101
              ],
              [
                -95.5125382191859,
                50.391338384450506
              ],
              [
                -95.50944831440074,
                50.39248750180101
              ],
              [
                -95.50979163715465,
                50.39101006009212
              ],
              [
                -95.50713088581188,
                50.39139310495587
              ],
              [
                -95.50790336200816,
                50.392815815928586
              ],
              [
                -95.50635840961559,
                50.39407433235638
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -96.0022600836958,
                50.316579828891385
              ],
              [
                -95.99796854927197,
                50.31534666058077
              ],
              [
                -95.99599444343701,
                50.31644281176981
              ],
              [
                -96.00140177681104,
                50.31827880839029
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        }
      ],
      "coordinates": []
    }),
    road = 
    /* color: #b2df00 */
    /* shown: false */
    ee.Geometry({
      "type": "GeometryCollection",
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.37439739989986,
                49.78615246869614
              ],
              [
                -94.35143769073238,
                49.78978207548895
              ],
              [
                -94.3533688812231,
                49.79041930662991
              ],
              [
                -94.3640118865942,
                49.78886777268663
              ],
              [
                -94.36203778075924,
                49.790169956312276
              ],
              [
                -94.36238110351314,
                49.791582924472316
              ],
              [
                -94.36508477020016,
                49.79255258465269
              ],
              [
                -94.36954796600094,
                49.78806428021902
              ],
              [
                -94.37538445281734,
                49.78703911530628
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.35700376459567,
                49.78331485140727
              ],
              [
                -94.35777624079196,
                49.78170766892672
              ],
              [
                -94.3627544207236,
                49.781485984400504
              ],
              [
                -94.36163862177341,
                49.782705236742444
              ],
              [
                -94.36601598688571,
                49.78131972034022
              ],
              [
                -94.36877471746757,
                49.77949862271582
              ],
              [
                -94.3646548444207,
                49.778057589466385
              ],
              [
                -94.35890418829277,
                49.77938777552584
              ],
              [
                -94.35796005071953,
                49.778390139404635
              ],
              [
                -94.3551276379998,
                49.77955404621572
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.46776728388718,
                49.776935671423004
              ],
              [
                -94.45686678645066,
                49.779429798076194
              ],
              [
                -94.45446352717332,
                49.781646691772806
              ],
              [
                -94.45772509333543,
                49.7828659400705
              ],
              [
                -94.47162966486863,
                49.782755100584055
              ],
              [
                -94.47849611994675,
                49.77699109785447
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.491004946602,
                49.76849448396796
              ],
              [
                -94.49435234345259,
                49.764114832838715
              ],
              [
                -94.48868751801314,
                49.76444747845482
              ],
              [
                -94.48310852326216,
                49.76705312348184
              ],
              [
                -94.47667122162642,
                49.76777380908221
              ],
              [
                -94.47435379303755,
                49.76838361160601
              ],
              [
                -94.4785594967729,
                49.770989045066734
              ],
              [
                -94.4869709042436,
                49.77331718626236
              ],
              [
                -94.4917774227983,
                49.77159880714169
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.5062128810566,
                49.765833477287416
              ],
              [
                -94.50036049164595,
                49.76555628069094
              ],
              [
                -94.49804306305708,
                49.76727487403853
              ],
              [
                -94.49958801544966,
                49.76910427742556
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.49176941179368,
                49.75613724836888
              ],
              [
                -94.48644790910814,
                49.752699211084604
              ],
              [
                -94.47837982439134,
                49.75464006854267
              ],
              [
                -94.47554741167161,
                49.76068395559937
              ],
              [
                -94.47434578203294,
                49.76523023650979
              ],
              [
                -94.48902282976243,
                49.76201461853024
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.39098154414658,
                49.776942638590704
              ],
              [
                -94.39930712092881,
                49.7732843544693
              ],
              [
                -94.40565859187608,
                49.772508319304485
              ],
              [
                -94.4044569622374,
                49.769459489429416
              ],
              [
                -94.39535890925889,
                49.77056817702817
              ],
              [
                -94.38557421077256,
                49.77339521562135
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -95.8482431032398,
                50.337678428374126
              ],
              [
                -95.8551953890064,
                50.33784277541647
              ],
              [
                -95.85425125143315,
                50.320528429212345
              ],
              [
                -95.8332227327564,
                50.32929597526092
              ],
              [
                -95.83476768514898,
                50.33099450026292
              ],
              [
                -95.8405183412769,
                50.32918639091785
              ],
              [
                -95.84335075399663,
                50.33099450026292
              ],
              [
                -95.83459602377202,
                50.33718538383554
              ],
              [
                -95.83794342062261,
                50.3398696755225
              ],
              [
                -95.84927307150151,
                50.331871134573305
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -96.1095182970647,
                50.33408661334865
              ],
              [
                -96.1095182970647,
                50.327292591190286
              ],
              [
                -96.10162187372485,
                50.327292591190286
              ],
              [
                -96.09921861444751,
                50.333648318653125
              ],
              [
                -96.10625673090259,
                50.33310044459775
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -95.82001005359092,
                50.31120432948061
              ],
              [
                -95.81447397418418,
                50.308463602166974
              ],
              [
                -95.80571924395957,
                50.31049175557558
              ],
              [
                -95.81928049273887,
                50.3154247405932
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        }
      ],
      "coordinates": []
    }),
    slope_class = 
    /* color: #886fd6 */
    /* shown: false */
    ee.Geometry({
      "type": "GeometryCollection",
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.16821723400871,
                49.974261875319
              ],
              [
                -94.16379695355216,
                49.97412387403748
              ],
              [
                -94.16208033978263,
                49.973433861693415
              ],
              [
                -94.15989165722648,
                49.97365466671997
              ],
              [
                -94.16255240856925,
                49.974896676116636
              ],
              [
                -94.16860347210685,
                49.975448670003146
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.18967490612785,
                49.98088547142384
              ],
              [
                -94.19087653576652,
                49.97964361660847
              ],
              [
                -94.17834525524894,
                49.97486907625608
              ],
              [
                -94.17748694836418,
                49.9758074626338
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.15199523388664,
                49.979008878434996
              ],
              [
                -94.14474254071037,
                49.9792572552393
              ],
              [
                -94.1438842338256,
                49.98052671665868
              ],
              [
                -94.14560084759513,
                49.979974781026876
              ],
              [
                -94.15199523388664,
                49.979974781026876
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.16886096417228,
                49.98113383854026
              ],
              [
                -94.1678739112548,
                49.97859491424508
              ],
              [
                -94.16662936627189,
                49.97876050034845
              ],
              [
                -94.16740184246818,
                49.98190652803599
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.18006903395897,
                50.07522553346002
              ],
              [
                -94.1777516053701,
                50.076547543955684
              ],
              [
                -94.18041235671288,
                50.07924653553873
              ],
              [
                -94.1901970551992,
                50.07985241072571
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.18916708693749,
                50.090151117419026
              ],
              [
                -94.18916708693749,
                50.0807336700564
              ],
              [
                -94.18710715041405,
                50.08095398235787
              ],
              [
                -94.18616301284081,
                50.08998591499017
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.21517378554589,
                50.069220943753635
              ],
              [
                -94.2048741029287,
                50.0738484004334
              ],
              [
                -94.20650488600975,
                50.07506027958516
              ],
              [
                -94.2158604310537,
                50.0711491049693
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -93.94944197402394,
                50.029924670980634
              ],
              [
                -93.93914229140675,
                50.02336297269558
              ],
              [
                -93.93759733901418,
                50.02396955383573
              ],
              [
                -93.95115858779347,
                50.032791686276234
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -93.94429213271535,
                50.022260078271536
              ],
              [
                -93.94223219619191,
                50.02540326062766
              ],
              [
                -93.95596510634816,
                50.03262628620012
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -93.93030173049367,
                50.04525018739837
              ],
              [
                -93.93811232314503,
                50.0422185489341
              ],
              [
                -93.93622404799855,
                50.04161219826522
              ],
              [
                -93.92721182570851,
                50.04513994935426
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        }
      ],
      "coordinates": []
    }),
    noslope_class = 
    /* color: #98ff00 */
    /* shown: false */
    ee.Geometry({
      "type": "GeometryCollection",
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.16516950564778,
                49.97823661758303
              ],
              [
                -94.16825941043294,
                49.97677390469382
              ],
              [
                -94.1632812305013,
                49.975531943750276
              ],
              [
                -94.16207960086263,
                49.97820901963823
              ],
              [
                -94.16448286013997,
                49.97820901963823
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.14508512454427,
                49.97773985215433
              ],
              [
                -94.14465597110188,
                49.975890735760004
              ],
              [
                -94.14289644198811,
                49.97671870711037
              ],
              [
                -94.14272478061116,
                49.978540193931245
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.24538618788964,
                50.07583145946185
              ],
              [
                -94.23714644179589,
                50.07764919152479
              ],
              [
                -94.24864775405175,
                50.08376287545203
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -94.12599570021874,
                50.08563537941011
              ],
              [
                -94.1392994569326,
                50.081064138128916
              ],
              [
                -94.12067419753319,
                50.07853049135506
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -93.9503002809087,
                50.041336581793
              ],
              [
                -93.94669539199269,
                50.041336581793
              ],
              [
                -93.9470387147466,
                50.04464387502276
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -93.9842718758637,
                50.04024524804171
              ],
              [
                -93.98942171717229,
                50.038370971459415
              ],
              [
                -93.9831560769135,
                50.0374338057292
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        }
      ],
      "coordinates": []
    }),
    newfound_crags = /* color: #ffe000 */ee.Geometry.MultiPoint(
        [[-93.97971502277855, 50.084581934157924],
         [-94.00529256794457, 50.02076406364606],
         [-95.86142238315853, 50.255790011828786],
         [-95.36181114502693, 49.82795102003192],
         [-95.32756470032479, 49.82545939181585],
         [-94.08234992914375, 49.91282314973725]]),
    area = 
    /* color: #ff0000 */
    /* shown: false */
    /* displayProperties: [
      {
        "type": "rectangle"
      }
    ] */
    ee.Geometry.Polygon(
        [[[-93.70672248397882, 49.935378163495514],
          [-93.70672248397882, 49.70501056643353],
          [-93.33318732772882, 49.70501056643353],
          [-93.33318732772882, 49.935378163495514]]], null, false);


*/
//////// SLOPE DATA ////////////

//see the information of the data
// print (srtm);

//displaying the data in interactive map
// Map.addLayer(srtm, {min:0, max: 300, 
// palette: ['90EE90','FFFF00','FF0000']}, 'Raw SRTM', false); //Light green, yellow, red

//display hillshading and slope
var hillshade = ee.Terrain.hillshade(srtm);
// Map.addLayer(hillshade, {min:150, max:255,}, 'Hillshade', false);
// print(hillshade);



// var dataset = ee.ImageCollection('NRCan/CDEM');
// var CDEM = dataset.select('Mosaic');
// var elevationVis = {
//   min: -50.0,
//   max: 1500.0,
//   palette: ['0905ff', 'ffefc4', 'ffffff'],
// };

// Map.addLayer(CDEM, elevationVis, 'CDEM');



var slope = ee.Terrain.slope(srtm);
Map.addLayer(slope, {min:0, max:20, pallete: ['FFFFFF']},'Slope', false);
// print(slope);

// //*/
function maskS2clouds(image) {
  var qa = image.select('QA60');

  // Bits 10 and 11 are clouds and cirrus, respectively.
  var cloudBitMask = 1 << 10;
  var cirrusBitMask = 1 << 11;

  // Both flags should be set to zero, indicating clear conditions.
  var mask = qa.bitwiseAnd(cloudBitMask).eq(0)
      .and(qa.bitwiseAnd(cirrusBitMask).eq(0));

  return image.updateMask(mask).divide(10000);
}

///// LANDSAT DATA //////

// Historical land cover classification using Machine Learning: SVM
// Loading Landsat 8 collection
var l8 = ee.ImageCollection('LANDSAT/LC08/C01/T1')
                  .filterDate('2019-06-16', '2019-07-30')
                  // Pre-filter to get less cloudy granules.

var image1 = ee.Algorithms.Landsat.simpleComposite({
  collection: l8.filterDate('2019-06-16', '2019-07-30'),
  asFloat: true
});
                  

var rgbVis = {
  min: 0.1,
  max: 0.2,
  bands: ['B7', 'B6', 'B2'],
};

// Map.addLayer(image1, rgbVis, 'Geology', false);

var image2 = ee.Algorithms.Landsat.simpleComposite({
  collection: l8.filterDate('2019-06-16', '2019-07-30'),
  asFloat: true
});
                  

var l8 = ee.ImageCollection('LANDSAT/LC08/C01/T1')
                  .filterDate('2019-06-16', '2019-07-30')
                  // Pre-filter to get less cloudy granules.
                  // maybe get better image with less clouds?

var input = ee.Algorithms.Landsat.simpleComposite({
  collection: l8.filterDate('2019-05-16', '2019-07-30'),
  asFloat: true
});
                  

var rgbVis = {
  min: 0.0,
  max: 0.2,
  bands: ['B4', 'B3', 'B2'],
};

// Map.addLayer(image2, rgbVis, 'Base');

////////////// Supervised Classification  ///////////

// function classify() {

// Make a cloud-free Landsat 8 TOA composite (from raw imagery).
var l8 = ee.ImageCollection('LANDSAT/LC08/C01/T1');

var image = ee.Algorithms.Landsat.simpleComposite({
  collection: l8.filterDate('2019-06-16', '2019-07-30'),
  asFloat: true
});

//  CHANGE THESE BANDS FOR BETTER CLASSIFICATION //

// Use these bands for prediction.
var bands = ['B2', 'B3', 'B4', 'B5', 'B6', 'B7', 'B10', 'B11'];

// Make a FeatureCollection from the hand-made geometries.
var polygons = ee.FeatureCollection([
  ee.Feature(rock, {'class': 0}), // rock formations
  ee.Feature(vegetation, {'class': 1}), // vegetation
  ee.Feature(cloud, {'class': 2}), // cloud
  ee.Feature(road, {'class': 3}), // road
  ee.Feature(water, {'class': 4}), // water
]);

// Get the values for all pixels in each polygon in the training.
var training = image.sampleRegions({
  // Get the sample from the polygons FeatureCollection.
  collection: polygons,
  // Keep this list of properties from the polygons.
  properties: ['class'],
  // Set the scale to get Landsat pixels in the polygons.
  scale: 30
});

// Create an SVM classifier with custom parameters.
var classifier = ee.Classifier.libsvm({
  kernelType: 'RBF',
  gamma: 0.5,
  cost: 10
});

// Train the classifier.
var trained = classifier.train(training, 'class', bands);

// Classify the image.
var classified = image.classify(trained).clip(area);


//  SPLIT DATA TO RUN FASTER AND OVER A LARGER AREA //

//   // We want to reserve some of the data for testing, to avoid overfitting the model.
//   var split = 0.7;  // Roughly 70% training, 30% testing.
//   var trainingPartition = withRandom.filter(ee.Filter.lt('random', split));
//   var testingPartition = withRandom.filter(ee.Filter.gte('random', split));
  
//   // Trained with 70% of our data.
//   var trainedClassifier = ee.Classifier.gmoMaxEnt().train({
//     features: trainingPartition,
//     classProperty: classProperty,
//     inputProperties: bands
//   });

//  RUN CONFUSION MATRIX TO MAKE MORE ACCURATE //

// var confusionMatrix = trained.testMatrix('class', 'classication')
// print('confusion matrix', confusionMatrix)

// Display the classification result and the input image.

// Map.addLayer(polygons, {}, 'training polygons', false);
// Map.addLayer(classified,
//             {min: 0, max: 4, palette: ['red','green','white','purple','blue']},
//             'classification', false);
// print(classified, "classification")


////////////// Create high slope variable ///////////////////////////

var slope2 = ee.Terrain.slope(srtm).mask(slope.gt(20)); // ADJUST SLOPE HERE
Map.addLayer(slope2, {min:0, max:30, pallete: ['FFFFFF']},'Slope2', false);

/////// CDEM High Slope Variable ////

// var CDEM_slope = ee.Terrain.slope(CDEM).mask(slope.gt(350)); // ADJUST SLOPE HERE
// Map.addLayer(CDEM_slope, {min:0, max:30, pallete: ['FFFFFF']},'CDEM Slope');

/////// Create rock cover and rock zone ////////////////

var rock_mask = classified.select('classification').eq(0)
var rock_cover = classified.updateMask(rock_mask)
// Map.addLayer(rock_cover, {palette: ['pink']}, 'rock', false);

var rock_vec = rock_cover.reduceToVectors({
  reducer: ee.Reducer.countEvery(), 
  geometry: area, 
  scale: 30,
  maxPixels: 1e8
});

// print(rock_vec, 'rock vectors');
// Map.addLayer(rock_vec, {color: 'red'}, 'rock vectors', false);

var getCentroids = function(feature) {
  return feature.set({polyCent: feature.centroid()});
};

var bufferPoly = function(feature) {
  return feature.buffer(100);   // substitute in your value of Z here
};

var fcWithCentroids = rock_vec.map(getCentroids);
// print(fcWithCentroids) // access the features and look at the properties, for which there should be a point with the centroid coords

var rock_zone = rock_vec.map(bufferPoly);
// Map.addLayer(rock_zone, {color: 'yellow'}, 'rock zone', false);

/////// Classify slope layer to convert slope2 to vector ////////

// Use these bands for prediction.
var slopeband = ['slope'];

// Make a FeatureCollection from the hand-made geometries.
var polygonslope = ee.FeatureCollection([
  ee.Feature(slope_class, {'class': 0}), // Slope 2
  ee.Feature(noslope_class, {'class': 1}), // Blank areas
]);

// Get the values for all pixels in each polygon in the training.
var training = slope2.sampleRegions({
  // Get the sample from the polygons FeatureCollection.
  collection: polygonslope,
  // Keep this list of properties from the polygons.
  properties: ['class'],
  // Set the scale to get Landsat pixels in the polygons.
  scale: 30
});

// Create an SVM classifier with custom parameters.
var classifierslope = ee.Classifier.libsvm({
  kernelType: 'RBF',
  gamma: 0.5,
  cost: 10
});

// Train the classifier.
var trainedslope = classifierslope.train(training, 'class', slopeband);

// Classify the image.
var classifiedslope = slope2.classify(trainedslope).clip(area);
// var confusionMatrix = trained.testMatrix('class', 'classication')
// print('confusion matrix', confusionMatrix)

// Display the classification result and the input image.
// Map.addLayer(polygonslope, {}, 'training polygons', false);
// Map.addLayer(classifiedslope,
//             {min: 0, max: 1, palette: ['orange','white']},'classificationslope', false);
             
var slope_vec = classifiedslope.reduceToVectors({
  reducer: ee.Reducer.countEvery(), 
  geometry: area, 
  scale: 30,
  maxPixels: 1e8
});             


Map.addLayer(slope_vec, {color: 'purple'}, 'slope vectors');

///////// Create an intersection layer between slope vectors and rock zone vectors //// 

// cast vectors
rock_zone = ee.FeatureCollection(rock_zone)

// make vectors a list
var vectorList = rock_zone.toList(rock_zone.size())

var polyIntersect = slope_vec.iterate(function(feature, list){
  list = ee.List(list)
  feature = ee.Feature(feature)
  
  var intersection = vectorList.map(function(feat) {
    feat = ee.Feature(feat)
    var intersection = feat.intersection(feature, ee.ErrorMargin(1));
    return ee.Feature(intersection).set({'Intersect': intersection.area().divide(1000 * 1000)})
  })

  return list.add(intersection)
}, ee.List([]));

polyIntersect = ee.FeatureCollection(ee.List(polyIntersect).flatten())

Map.addLayer(polyIntersect, {}, 'rock walls')

// Exporting Data //

// Convert GeometryCollections to Feature Collections //
var knowncrags = ee.FeatureCollection([known_crags]);
var potentialcrags = ee.FeatureCollection([potential_crags]);
var newfoundcrags = ee.FeatureCollection([newfound_crags]);


// Export the FeatureCollection.
Export.table.toDrive({
  collection: polyIntersect,
  description: 'Forbidden_20',
  fileFormat: 'kml',
  folder: 'FAexports',
});

// Export.table.toDrive({
//   collection: knowncrags,
//   description: 'Known_Crags',
//   fileFormat: 'KML',
//   folder: 'FAexports',
// });
// Export.table.toDrive({
//   collection: potentialcrags,
//   description: 'Potential_Crags',
//   fileFormat: 'KML',
//   folder: 'FAexports',
// });
Export.table.toDrive({
  collection: newfoundcrags,
  description: 'New_Found_Crags',
  fileFormat: 'GEOJSON',
  folder: 'FAexports',
});

// For Grid measuring exports, matching Area to size of lat/long // 
var longitude = ee.Image.pixelLonLat().select('longitude');
var utmZones = longitude.add(180).divide(6).int();
Map.addLayer(utmZones, {min:0, max: 60}, 'UTM zones')

Map.centerObject(area, 9) 
